<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CNFT</title>
<link href="./bootstrap.min.css" rel="stylesheet">
<script src="./bootstrap.min.js"></script>
<script src="./jquery-3.6.0.min.js"></script>
<script type="text/javascript">
	function loadData() {
		var key = $("#options").val();
		$.getJSON( "https://api.cnft.io/api/sold?search=" + key + "&sort=date&order=desc&count=100&page=1", function( json ) {
			var items = [];
			console.log("Assets: " + json.assets.length);
			for (var i = 0; i < json.assets.length; i++) {
				var date = new Date(json.assets[i].date);
				var price = Math.round(json.assets[i].price/10000)/100;
				items.push( "<tr>" +
					"<td>" + json.assets[i].assetid + "</td>" +
					"<td>" + date.toLocaleString('lv-LV', { hour12: false }) + "</td>" +
					"<td>" + price + "</td>" +
					"<td>" + json.assets[i].unit + "</td>" +
					"</tr>" );
			}
			
			$("#table").empty().append(items.join(""));
		});
	}
</script>
</head>
<body>
<div class="col-lg-8 mx-auto p-3 py-md-5">
	<header class="d-flex align-items-center pb-3 mb-5 border-bottom">
		<a href="/" class="d-flex align-items-center text-dark text-decoration-none">
		<span class="fs-4">CNFT</span>
		</a>
	</header>
	<main>

	<div class="container">
		<div class="row">
			<div class="col">
				<select class="form-select" id="options">
					<option value="788888fd99cb7ef837570ce5bf8808d959697a025adeca03d46349f1">KaizenNFT</option>
					<option value="b48990272ecef6e618a3cd3f83511ce58606117daa0921191eac5903">Caricatures</option>
					<option value="kidz">Kidz</option>
					<option value="3383a7ea34c92eac945847641d4e8fd036fe213abf1f686710f30f56">Vitalik</option>
					<option value="1ec85dcee27f2d90ec1f9a1e4ce74a667dc9be8b184463223f9c9601">PXL</option>
				</select>
			</div>
			<div class="col">
				<button type="button" class="btn btn-primary" onclick="loadData()">Query...</button>
			</div>
		</div>
	</div>
	
	<br/>

	<table class="table table-striped">
		<thead>
			<tr>
				<th scope="col">ID</th>
				<th scope="col">Date</th>
				<th scope="col">Price</th>
				<th scope="col">Unit</th>
			</tr>
		</thead>
		<tbody id="table">
		</tbody>
	</table>

	</main>
	<footer class="pt-5 my-5 text-muted border-top">&copy; 2021</footer>
</div>

</body>
</html>
